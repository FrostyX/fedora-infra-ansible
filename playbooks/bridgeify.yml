# Playbook to setup initial bridges on virthosts
# pass itL
# -e target=inventory_hostname
# -e br0

- hosts: "{{ target }}"
  vars:
    network_connections:
      - name: br0
        state: up
        type: bridge
        autoconnect: yes
        ip:
          address: 
          - "{{ br0_ip }}/24"
          gateway4: "{{ br0_gw }}
          dns: 
          - 10.3.163.33
          - 10.3.163.34
          dns_search: 
          - vpn.fedoraproject.org
          - iad2.fedoraproject.org
          - fedoraproject.org
          dhcp4: no
          auto6: no

      - name: br0-port0
        state: up
        type: ethernet
        master: br0
        mac: "{{ mac1 }}"

      - name: br1
        state: up
        type: bridge
        autoconnect: yes
        ip:
          dhcp4: no
          auto6: no

      - name: br1-port0
        state: up
        type: ethernet
        master: br1
        mac: "{{ mac2 }}"

      - name: eno3
        type: ethernet
        mac: "{{ mac3 }}"

      - name: eno4
        type: ethernet
        mac: "{{ mac4 }}"

  roles:
    - role: linux-system-roles.network

