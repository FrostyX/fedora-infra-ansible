<VirtualHost *:80>
   {% if env == 'pagure-staging' %}
   ServerName stg.pagure.io
   Redirect permanent / https://stg.pagure.io/
   {% else %}
   ServerName pagure.io
   Redirect permanent / https://pagure.io/
   {% endif %}
</VirtualHost>

<VirtualHost *:443>
   ServerName pagure.io:443

   SSLEngine on
   SSLProtocol all -SSLv2 -SSLv3
   # Use secure TLSv1.1 and TLSv1.2 ciphers
   Header always add Strict-Transport-Security "max-age=15768000; includeSubDomains; preload"

   SSLCertificateFile /etc/pki/tls/certs/pagure.io.cert
   SSLCertificateChainFile /etc/pki/tls/certs/pagure.io.intermediate.cert
   SSLCertificateKeyFile /etc/pki/tls/certs/pagure.io.key
</VirtualHost>


#TODO: move this to 443 when we have the ssl certs

<VirtualHost docs.pagure.org:80>

    <Location /d>
        WSGIProcessGroup pagure
        <IfModule mod_authz_core.c>
            # Apache 2.4
            Require all granted
        </IfModule>
        <IfModule !mod_authz_core.c>
             # Apache 2.2
            Order deny,allow
            Allow from all
        </IfModule>
    </Location>

</VirtualHost>

