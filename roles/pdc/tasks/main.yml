
- name: setup the PDC copr repo
  copy: >
    src="xchu-pdc-epel-7.repo"
    dest="/etc/yum.repos.d/xchu-pdc-epel-7.repo"
    owner=root
    group=root
    mode=0644
  tags:
  - pdc

- name: setup the patternfly copr repo
  copy: >
    src="patternfly-patternfly1-epel-7.repo"
    dest="/etc/yum.repos.d/patternfly-patternfly1-epel-7.repo"
    owner=root
    group=root
    mode=0644
  tags:
  - pdc

- name: install needed packages
  yum: pkg={{ item }} state=present
  with_items:
  - patternfly1
  - pdc-server
  tags:
  - pdc

- name: Copy over settings_local.py
  template: src=settings_local.py dest=/usr/lib/python2.7/site-packages/pdc/settings_local.py
  notify: restart httpd
  tags:
  - pdc

- name: Copy over httpd config
  template: src=pdc.conf dest=/etc/httpd/conf.d/pdc.conf
  notify: restart httpd
  tags:
  - pdc
