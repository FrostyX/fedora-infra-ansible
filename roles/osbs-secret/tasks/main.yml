---
- name: place osbs_secret_files if they do not exist
  copy:
    src: "{{item.source}}"
    dest: "{{item.dest}}"
  with_items: "{{ osbs_secret_files }}"
  tags:
  - oc

- name: create secrets resource file
  template:
    src: openshift-secret.yml.j2
    dest: "{{ osbs_secret_remote_dir }}/openshift-secret-{{ inventory_hostname }}-{{ osbs_namespace }}-{{ osbs_secret_name }}.yml"
    mode: "0600"
  notify:
  - import osbs secret
  - delete secret resource file
  tags:
  - oc

- meta: flush_handlers
  tags:
  - oc
