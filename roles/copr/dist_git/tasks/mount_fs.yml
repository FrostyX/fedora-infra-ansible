- name: prepare mount point
  file: state=directory path=/var/lib/dist-git

- name: mount up disk of copr repo
  mount: name=/var/lib/dist-git src='LABEL=copr-dist-git' fstype=ext4 state=mounted

- name: prepare new /srv/git bind mount point
  file: state=directory path=/srv/git
  when: devel

- name: prepare new /srv/cache bind mount point
  file: state=directory path=/srv/cache
  when: devel

- name: mount up /srv/git
  mount: name=/srv/git src=/var/lib/dist-git/git fstype=ext4 opts=rw,bind state=mounted
  when: devel

- name: mount up /srv/cache
  mount: name=/srv/cache src=/var/lib/dist-git/cache fstype=ext4 opts=rw,bind state=mounted
  when: devel

- name: prepare mount point
  file: state=directory path=/var/lib/copr-dist-git

- name: mount up disk of copr repo
  mount: name=/var/lib/copr-dist-git src='LABEL=cdg-log' fstype=ext4 state=mounted
  when: not devel

- name: mount tmp on tmpfs
  mount: name=/tmp src=tmpfs fstype=tmpfs state=mounted opts=defaults,size=6G
