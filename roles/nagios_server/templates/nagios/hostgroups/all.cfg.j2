###############
# All Servers and associated devices
###############
## {{ env }}

{% if env == "staging" %}

define hostgroup{
       hostgroup_name all
       alias          all
       members        {% for host in groups['all'] %}{% if (hostvars[host].env is defined) and (hostvars[host].env == 'staging') %} {{host}}, {% endif %} {% endfor %} 

}

{% else %}

{% for key, value in groups.iteritems() %}
{% if groups[key] %}
define hostgroup{
       hostgroup_name {{ key }}
       alias          {{ key }}
       members        {% for host in groups[key] %}{{host}}, {% endfor %} 

}
{% endfor %}


{% endif %}
