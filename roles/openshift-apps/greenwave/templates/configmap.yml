apiVersion: v1
kind: ConfigMap
metadata:
  name: greenwave-stg-configmap
  labels:
    app: greenwave
data:
  settings.py: |-
    SECRET_KEY = '{{stg_greenwave_secret_key}}'
    HOST= '0.0.0.0'
    PORT = 8080
    WAIVERDB_API_URL = 'https://waiverdb-stg-web-waiverdb.app.os.stg.fedoraproject.org/api/v1.0'
    DEBUG = False
    POLICIES_DIR = '/etc/greenwave/'
  fedora.yaml: |-
    --- !Policy
    id: "taskotron_release_critical_tasks"
    product_versions:
      - fedora-27
      - fedora-26
      - fedora-25
    decision_context: bodhi_update_push_stable
    relevance_value: koji_build
    rules:
      - !PassingTestCaseRule {test_case_name: dist.abicheck}
      - !PassingTestCaseRule {test_case_name: dist.rpmdeplint}
      - !PassingTestCaseRule {test_case_name: dist.upgradepath}
    --- !Policy
    # Fedora Atomic CI pipeline
    # http://fedoraproject.org/wiki/CI
    id: "atomic_ci_pipeline_results"
    product_versions:
      - fedora-27
      - fedora-26
      - fedora-25
    decision_context: bodhi_update_push_stable
    relevance_key: original_spec_nvr
    rules:
      - !Any { test_case_names: [org.centos.prod.ci.pipeline.package.complete, org.centos.prod.ci.pipeline.package.ignored] }
