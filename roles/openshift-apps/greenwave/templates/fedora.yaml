--- !Policy
id: "openqa_important_stuff_for_rawhide"
product_versions:
  - fedora-rawhide
decision_context: rawhide_compose_sync_to_mirrors
subject_type: compose
rules:
  - !PassingTestCaseRule {test_case_name: compose.cloud_autocloud, scenario: "fedora.Cloud_Base-qcow2-qcow2.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.base_system_logging, scenario: "fedora.KDE-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.base_system_logging, scenario: "fedora.Server-dvd-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.base_system_logging, scenario: "fedora.Workstation-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.base_update_cli, scenario: "fedora.KDE-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.base_update_cli, scenario: "fedora.Server-dvd-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.base_update_cli, scenario: "fedora.Workstation-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.desktop_browser, scenario: "fedora.KDE-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.desktop_browser, scenario: "fedora.Workstation-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.desktop_terminal, scenario: "fedora.KDE-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.desktop_terminal, scenario: "fedora.Workstation-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_anaconda_text, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_default, scenario: "fedora.Everything-boot-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_default, scenario: "fedora.Everything-boot-iso.x86_64.uefi"}
  - !PassingTestCaseRule {test_case_name: compose.install_default, scenario: "fedora.KDE-live-iso.x86_64.uefi"}
  - !PassingTestCaseRule {test_case_name: compose.install_default, scenario: "fedora.Server-boot-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_default, scenario: "fedora.Server-boot-iso.x86_64.uefi"}
  - !PassingTestCaseRule {test_case_name: compose.install_default, scenario: "fedora.Server-dvd-iso.x86_64.uefi"}
  - !PassingTestCaseRule {test_case_name: compose.install_default, scenario: "fedora.Workstation-live-iso.x86_64.uefi"}
  - !PassingTestCaseRule {test_case_name: compose.install_default_upload, scenario: "fedora.KDE-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_default_upload, scenario: "fedora.Server-dvd-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_default_upload, scenario: "fedora.Workstation-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_delete_pata, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_delete_pata, scenario: "fedora.universal.x86_64.uefi"}
  - !PassingTestCaseRule {test_case_name: compose.install_kickstart_firewall_configured, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_kickstart_firewall_disabled, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_kickstart_user_creation, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_mirrorlist_graphical, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_multi, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_multi, scenario: "fedora.universal.x86_64.uefi"}
  - !PassingTestCaseRule {test_case_name: compose.install_no_user, scenario: "fedora.KDE-live-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_repository_http_graphical, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_repository_http_variation, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_sata, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.install_sata, scenario: "fedora.universal.x86_64.uefi"}
  - !PassingTestCaseRule {test_case_name: compose.install_scsi_updates_img, scenario: "fedora.universal.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.realmd_join_sssd, scenario: "fedora.Server-dvd-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.server_cockpit_default, scenario: "fedora.Server-dvd-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.server_database_client, scenario: "fedora.Server-dvd-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.server_firewall_default, scenario: "fedora.Server-dvd-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.server_realmd_join_kickstart, scenario: "fedora.Server-dvd-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.server_role_deploy_database_server, scenario: "fedora.Server-dvd-iso.x86_64.64bit"}
  - !PassingTestCaseRule {test_case_name: compose.server_role_deploy_domain_controller, scenario: "fedora.Server-dvd-iso.x86_64.64bit"}

--- !Policy
# _kojibuild_ policies are for koji_build subjects; Fedora CI tests run at
# at the Koji build level and report results which will be found by these
# policies. We must have at least one kojibuild policy for each Fedora
# version Bodhi might operate on (because ignore_missing_policy is false
# for the koji_build subject type, as config stands at 2020-11, so Bodhi
# will fail if it queries Greenwave and no koji_build policy matches the
# query terms).

# _update_ policies are for bodhi_update subjects; Fedora openQA tests run
# at the Bodhi update level and report results which will be found by these
# policies. ignore_missing_policy is true for the bodhi_update subject type
# (in upstream Greenwave default config, as of 2020-11) so it is OK for
# there not to be any matching policy of this type that matches when Bodhi
# queries.

# note that policies are *additive*. If a query matches multiple of these
# policies, all the rules in all the matched policies are applied.

id: "fedora_mainline_kojibuild_remoterule"
product_versions:
  - fedora-rawhide
  - fedora-34
  - fedora-33
  - fedora-32
decision_context: bodhi_update_push_testing
subject_type: koji_build
rules:
  # this means "apply gating configs in package repos"
  # see Greenwave docs/policies.rst for more details
  - !RemoteRule {}

--- !Policy
id: "fedora_mainline_kojibuild_remoterule"
product_versions:
  - fedora-rawhide
  - fedora-34
  - fedora-33
  - fedora-32
decision_context: bodhi_update_push_stable
subject_type: koji_build
rules:
  # this means "apply gating configs in package repos"
  # see Greenwave docs/policies.rst for more details
  - !RemoteRule {}

--- !Policy
id: "kojibuild_no_requirements_testing"
  # this is a null policy, it enforces no requirements. It is needed
  # because at least one policy must match for koji_build subjects.
  # if a query matches this policy and no other, no requirements will
  # be applied
product_versions:
  - fedora-34-modular
  - fedora-34-containers
  - fedora-34-flatpaks
  - fedora-33-modular
  - fedora-33-containers
  - fedora-33-flatpaks
  - fedora-32-modular
  - fedora-32-containers
  - fedora-32-flatpaks
  - fedora-epel-8
  - fedora-epel-8-modular
  - fedora-epel-7
  - fedora-eln
decision_context: bodhi_update_push_testing
subject_type: koji_build
rules: []

--- !Policy
id: "kojibuild_no_requirements_stable"
  # this is a null policy, it enforces no requirements. It is needed
  # because at least one policy must match for koji_build subjects.
  # if a query matches this policy and no other, no requirements will
  # be applied
product_versions:
  - fedora-34-modular
  - fedora-34-containers
  - fedora-34-flatpaks
  - fedora-33-modular
  - fedora-33-containers
  - fedora-33-flatpaks
  - fedora-32-modular
  - fedora-32-containers
  - fedora-32-flatpaks
  - fedora-epel-8
  - fedora-epel-8-modular
  - fedora-epel-7
  - fedora-epel-6
  - fedora-eln
decision_context: bodhi_update_push_stable
subject_type: koji_build
rules: []

--- !Policy
id: "fedora_mainline_update_rules_for_testing"
product_versions:
  - fedora-rawhide
  - fedora-34
  - fedora-33
  - fedora-32
decision_context: bodhi_update_push_testing
subject_type: bodhi_update
rules:
  # this means "apply gating configs in package repos"
  # see Greenwave docs/policies.rst for more details
  - !RemoteRule {}

--- !Policy
id: "fedora_mainline_update_rules_for_stable"
product_versions:
  - fedora-rawhide
  - fedora-34
  - fedora-33
  - fedora-32
decision_context: bodhi_update_push_stable
subject_type: bodhi_update
rules:
  # this means "apply gating configs in package repos"
  # see Greenwave docs/policies.rst for more details
  - !RemoteRule {}
