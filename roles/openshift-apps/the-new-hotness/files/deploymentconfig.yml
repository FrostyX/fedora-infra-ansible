- apiVersion: v1
  kind: DeploymentConfig
  metadata:
    labels:
      app: the-new-hotness
      service: the-new-hotness
    name: the-new-hotness
  spec:
    replicas: 1
    selector:
      deploymentconfig: the-new-hotness
    strategy:
      activeDeadlineSeconds: 21600
      recreateParams:
        timeoutSeconds: 600
      type: Recreate
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: the-new-hotness
          deploymentconfig: the-new-hotness
      spec:
        containers:
          - name: the-new-hotness
            image: the-new-hotness/the-new-hotness:latest
            command: ["fedora-messaging", "consume"]
            volumeMounts:
              - name: config-volume
                mountPath: /etc/fedora-messaging
                readOnly: true
#              - name: fedmsg-key-volume
#                mountPath: /etc/pki/fedmsg/key
#                readOnly: true
#              - name: fedmsg-crt-volume
#                mountPath: /etc/pki/fedmsg/crt
#                readOnly: true
        volumes:
          - name: config-volume
            configMap:
              name: the-new-hotness-configmap
#          - name: fedmsg-key-volume
#            secret:
#              secretName: release-monitoring-fedmsg-key
#          - name: fedmsg-crt-volume
#            secret:
#              secretName: release-monitoring-fedmsg-cert
    triggers:
      - imageChangeParams:
          automatic: true
          containerNames:
            - the-new-hotness
          from:
            kind: ImageStreamTag
            name: the-new-hotness:latest
            namespace: the-new-hotness
        type: ImageChange
      - type: ConfigChange
kind: List
metadata: {}
