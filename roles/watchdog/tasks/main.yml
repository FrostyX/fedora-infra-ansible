---
#
# Setup watchdog
#
- name: install needed packages
  yum: pkg={{ item }} state=present
  with_items:
  - watchdog
  tags:
  - packages
  - watchdog
  when: ansible_distribution_major_version|int < 22

- name: install needed packages
  dnf: pkg={{ item }} state=present
  with_items:
  - watchdog
  tags:
  - packages
  - watchdog
  when: ansible_distribution_major_version|int > 21

- name: watchdog device configuration
  copy: src=watchdog-device dest=/etc/watchdog.d/watchdog-device owner=root group=root mode=644
  tags:
  - config
  - watchdog
  notify: restart watchdog
