- name: Install packages
  package:
    name:
    - po4a
    - git
    - perl-gettext
    - perl-Pod-Parser
    - perl(YAML::Tiny)
    - perl(Unicode::GCString)
    state: present
  tags:
  - fedora-docs-translation

- name: Create a non root user to run the code
  user:
    name: _update_docs_trans
    generate_ssh_key: yes
    ssh_key_file: .ssh/id_rsa_docs_trans
  tags:
  - fedora-docs-translation

# the key is going to be added to pagure for pushing
- name: Display the public key
  command: cat ~_update_docs_trans/.ssh/id_rsa_docs_trans.pub
  tags:
  - fedora-docs-translation

- copy:
    src: docs-translation-update
    dest: /usr/local/bin/docs-translation-update
    owner: root
    group: root
    mode: 0755
  tags:
  - fedora-docs-translation

- copy:
    src: cron-docs-translation-update
    dest: /etc/cron.d/cron-docs-translation-update
    owner: root
    group: root
    mode: 0644
  tags:
  - fedora-docs-translation
  when: env == "production"


